# =============================================================================
# TasteInsight Backend - Test Environment Configuration
# =============================================================================
# Copy this file to .env.test for running tests locally.
#
# Usage:
#   pnpm test:setup    # Setup test database
#   pnpm test:e2e      # Run E2E tests
# =============================================================================

# --- Application ---
APP_PORT=3000
APP_URL="http://localhost:${APP_PORT}"

# --- Initial Superadmin ---
INITIAL_ADMIN_USERNAME=testadmin
INITIAL_ADMIN_PASSWORD=password123

# --- Database ---
# Use a separate test database to avoid data conflicts
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=tester
POSTGRES_PASSWORD=tester
POSTGRES_DB=taster
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public"

# --- JWT ---
JWT_SECRET=test-jwt-secret
JWT_EXPIRATION_TIME=3600s
JWT_REFRESH_SECRET=test-refresh-secret
JWT_REFRESH_EXPIRATION_TIME=7d

# --- WeChat (Mock values for testing) ---
WECHAT_APPID=test_wechat_appid
WECHAT_SECRET=test_wechat_appsecret

# --- Upload Configuration ---
UPLOAD_STORAGE_TYPE=local       # local | oss
UPLOAD_LOCAL_PATH=./uploads     # 本地存储路径
UPLOAD_BASE_URL="${APP_URL}/images" # 图片访问的基础 URL
UPLOAD_MAX_FILE_SIZE=10485760   # 最大文件大小（字节），默认 10MB

# --- Testing ---
# Enable mock authentication for E2E tests
ENABLE_MOCK_AUTH=true