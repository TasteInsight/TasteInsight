{
  "openapi": "3.0.1",
  "info": {
    "title": "TasteInsight API",
    "description": "食鉴（TasteInsight）校园菜品点评平台API接口文档",
    "version": "0.1.0",
    "contact": {
      "name": "TasteInsight Team",
      "email": ""
    }
  },
  "tags": [
    {
      "name": "认证"
    },
    {
      "name": "管理-菜品"
    },
    {
      "name": "管理-审核"
    },
    {
      "name": "管理-权限"
    },
    {
      "name": "管理-日志"
    },
    {
      "name": "管理-新闻"
    },
    {
      "name": "管理-食堂"
    },
    {
      "name": "通用"
    }
  ],
  "paths": {
    "/auth/admin/login": {
      "post": {
        "summary": "管理员登录",
        "deprecated": false,
        "description": "管理员使用用户名和密码登录",
        "operationId": "adminLogin",
        "tags": [
          "认证"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "username",
                  "password"
                ],
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "用户名"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "description": "密码"
                  }
                }
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminLoginResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "请求有误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 401,
                  "message": "未授权，请先登录"
                }
              }
            },
            "headers": {}
          },
          "500": {
            "description": "服务器内部错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/auth/refresh": {
      "post": {
        "summary": "刷新Token",
        "deprecated": false,
        "description": "使用当前Token刷新获取新Token",
        "operationId": "refreshToken",
        "tags": [
          "认证"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "刷新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            },
            "headers": {}
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 401,
                  "message": "未授权，请先登录"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes": {
      "get": {
        "summary": "管理端获取菜品列表",
        "deprecated": false,
        "description": "管理员获取所有菜品列表（需浏览权限）",
        "operationId": "adminGetDishes",
        "tags": [
          "管理-菜品"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "canteenId",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "online",
                "offline"
              ]
            }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DishListResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 403,
                  "message": "权限不足"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "post": {
        "summary": "新建菜品",
        "deprecated": false,
        "description": "管理员创建新菜品（需新建权限）",
        "operationId": "adminCreateDish",
        "tags": [
          "管理-菜品"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DishCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DishResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 403,
                  "message": "权限不足"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes/{id}": {
      "put": {
        "summary": "编辑菜品",
        "deprecated": false,
        "description": "管理员编辑菜品信息（需编辑权限）",
        "operationId": "adminUpdateDish",
        "tags": [
          "管理-菜品"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DishUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DishResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 403,
                  "message": "权限不足"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "delete": {
        "summary": "删除菜品",
        "deprecated": false,
        "description": "管理员删除菜品（需删除权限）",
        "operationId": "adminDeleteDish",
        "tags": [
          "管理-菜品"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 403,
                  "message": "权限不足"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes/{id}/status": {
      "patch": {
        "summary": "修改菜品状态",
        "deprecated": false,
        "description": "管理员修改菜品上下架状态（需编辑权限）",
        "operationId": "adminUpdateDishStatus",
        "tags": [
          "管理-菜品"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "online",
                      "offline"
                    ],
                    "description": "菜品状态"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "状态修改成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/reviews/pending": {
      "get": {
        "summary": "获取待审核评价列表",
        "deprecated": false,
        "description": "管理员获取待审核的评价列表（需审核权限）",
        "operationId": "adminGetPendingReviews",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PendingReviewListResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/reviews/{id}/approve": {
      "post": {
        "summary": "通过评价审核",
        "deprecated": false,
        "description": "管理员通过评价审核（需审核权限）",
        "operationId": "adminApproveReview",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "审核通过",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/reviews/{id}/reject": {
      "post": {
        "summary": "拒绝评价审核",
        "deprecated": false,
        "description": "管理员拒绝评价审核（需审核权限）",
        "operationId": "adminRejectReview",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reason"
                ],
                "properties": {
                  "reason": {
                    "type": "string",
                    "description": "拒绝原因"
                  }
                }
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "已拒绝",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/comments/pending": {
      "get": {
        "summary": "获取待审核评论列表",
        "deprecated": false,
        "description": "管理员获取待审核的评论列表（需审核权限）",
        "operationId": "adminGetPendingComments",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PendingCommentListResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/comments/{id}/approve": {
      "post": {
        "summary": "通过评论审核",
        "deprecated": false,
        "description": "管理员通过评论审核（需审核权限）",
        "operationId": "adminApproveComment",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "审核通过",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/comments/{id}/reject": {
      "post": {
        "summary": "拒绝评论审核",
        "deprecated": false,
        "description": "管理员拒绝评论审核（需审核权限）",
        "operationId": "adminRejectComment",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reason"
                ],
                "properties": {
                  "reason": {
                    "type": "string",
                    "description": "拒绝原因"
                  }
                }
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "已拒绝",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/reports": {
      "get": {
        "summary": "获取举报列表",
        "deprecated": false,
        "description": "管理员获取所有举报（需审核权限）",
        "operationId": "adminGetReports",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "approved",
                "rejected"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportListResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/reports/{id}/handle": {
      "post": {
        "summary": "处理举报",
        "deprecated": false,
        "description": "管理员处理举报（需审核权限）",
        "operationId": "adminHandleReport",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReportHandleRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "处理成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes/uploads/pending": {
      "get": {
        "summary": "获取待审核的用户上传菜品",
        "deprecated": false,
        "description": "管理员获取待审核的用户上传菜品列表（需审核权限）",
        "operationId": "adminGetPendingUploads",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PendingUploadListResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes/uploads/{id}/approve": {
      "post": {
        "summary": "通过用户上传菜品审核",
        "deprecated": false,
        "description": "管理员通过用户上传的菜品，菜品正式入库（需审核权限）",
        "operationId": "adminApproveUpload",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "审核通过，菜品已入库",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/dishes/uploads/{id}/reject": {
      "post": {
        "summary": "拒绝用户上传菜品审核",
        "deprecated": false,
        "description": "管理员拒绝用户上传的菜品（需审核权限）",
        "operationId": "adminRejectUpload",
        "tags": [
          "管理-审核"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reason"
                ],
                "properties": {
                  "reason": {
                    "type": "string",
                    "description": "拒绝原因"
                  }
                }
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "已拒绝",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/admins": {
      "get": {
        "summary": "获取子管理员列表",
        "deprecated": false,
        "description": "管理员获取自己创建的子管理员列表",
        "operationId": "adminGetSubAdmins",
        "tags": [
          "管理-权限"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminListResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "post": {
        "summary": "创建子管理员",
        "deprecated": false,
        "description": "管理员创建子管理员并分配权限",
        "operationId": "adminCreateSubAdmin",
        "tags": [
          "管理-权限"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/admins/{id}": {
      "delete": {
        "summary": "删除子管理员",
        "deprecated": false,
        "description": "管理员删除自己创建的子管理员",
        "operationId": "adminDeleteSubAdmin",
        "tags": [
          "管理-权限"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "code": 403,
                  "message": "权限不足"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/admins/{id}/permissions": {
      "put": {
        "summary": "更新子管理员权限",
        "deprecated": false,
        "description": "管理员更新子管理员的权限",
        "operationId": "adminUpdatePermissions",
        "tags": [
          "管理-权限"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "permissions"
                ],
                "properties": {
                  "permissions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "权限列表"
                  }
                }
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/logs": {
      "get": {
        "summary": "获取操作日志",
        "deprecated": false,
        "description": "管理员查询操作日志",
        "operationId": "adminGetLogs",
        "tags": [
          "管理-日志"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "adminId",
            "in": "query",
            "description": "操作者ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "action",
            "in": "query",
            "description": "操作类型",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "startDate",
            "in": "query",
            "description": "开始时间",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "结束时间",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogListResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          },
          "403": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/news": {
      "get": {
        "summary": "管理端获取新闻列表",
        "deprecated": false,
        "description": "管理员获取所有新闻（需浏览权限）",
        "operationId": "adminGetNews",
        "tags": [
          "管理-新闻"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewsListResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "post": {
        "summary": "创建新闻",
        "deprecated": false,
        "description": "管理员创建新闻（需创建权限）",
        "operationId": "adminCreateNews",
        "tags": [
          "管理-新闻"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewsCreateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewsResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/news/{id}": {
      "put": {
        "summary": "编辑新闻",
        "deprecated": false,
        "description": "管理员编辑新闻（需编辑权限）",
        "operationId": "adminUpdateNews",
        "tags": [
          "管理-新闻"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewsUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewsResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "delete": {
        "summary": "删除新闻",
        "deprecated": false,
        "description": "管理员删除新闻（需删除权限）",
        "operationId": "adminDeleteNews",
        "tags": [
          "管理-新闻"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "example": "",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/admin/canteens": {
      "get": {
        "summary": "管理端获得食堂列表",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CanteenListResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      },
      "post": {
        "summary": "新建食堂",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CanteenCreateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CanteenResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/admin/windows/{canteenId}": {
      "get": {
        "summary": "管理端获得窗口列表",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "canteenId",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WindowListResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/admin/canteens/{id}": {
      "put": {
        "summary": "编辑食堂",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CanteenUpdateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CanteenResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      },
      "delete": {
        "summary": "删除食堂",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/admin/windows": {
      "post": {
        "summary": "新建窗口",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WindowCreateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WindowResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/admin/windows/{Id}": {
      "put": {
        "summary": "编辑窗口",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "Id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WindowUpdateRequest"
              },
              "examples": {}
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WindowResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      },
      "delete": {
        "summary": "删除窗口",
        "deprecated": false,
        "description": "",
        "tags": [
          "管理-食堂"
        ],
        "parameters": [
          {
            "name": "Id",
            "in": "path",
            "description": "",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/upload/image": {
      "post": {
        "summary": "上传图片",
        "deprecated": false,
        "description": "上传图片文件",
        "operationId": "uploadImage",
        "tags": [
          "通用"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "图片文件",
                    "example": ""
                  }
                },
                "required": [
                  "file"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageUploadResponse"
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "用户ID"
          },
          "openId": {
            "type": "string",
            "description": "微信OpenID"
          },
          "nickname": {
            "type": "string",
            "description": "昵称"
          },
          "avatar": {
            "type": "string",
            "description": "头像URL"
          },
          "preferences": {
            "description": "用户偏好设置",
            "$ref": "#/components/schemas/UserPreference",
            "properties": {}
          },
          "allergens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "过敏原列表"
          },
          "myFavoriteDishes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "收藏的菜品ID列表"
          },
          "myReviews": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "评分的ID列表"
          },
          "myComments": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "评论的ID列表"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "UserPreference": {
        "type": "object",
        "description": "用户偏好设置",
        "properties": {
          "id": {
            "type": "string",
            "description": "偏好设置ID"
          },
          "userId": {
            "type": "string",
            "description": "用户ID"
          },
          "spicyLevel": {
            "type": "integer",
            "minimum": 0,
            "maximum": 5,
            "default": 2,
            "description": "辣度偏好等级，0-不吃辣，1-微辣，2-中辣，3-较辣，4-很辣，5-特辣"
          },
          "tagPreferences": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "川菜",
                "粤菜",
                "湘菜",
                "鲁菜",
                "苏菜",
                "浙菜",
                "闽菜",
                "徽菜",
                "西餐",
                "日韩料理",
                "清真",
                "素食"
              ]
            },
            "description": "菜系偏好列表",
            "maxItems": 10
          },
          "priceRange": {
            "type": "object",
            "description": "价格偏好范围（单位：元）",
            "properties": {
              "min": {
                "type": "number",
                "format": "float",
                "minimum": 0,
                "default": 0
              },
              "max": {
                "type": "number",
                "format": "float",
                "minimum": 0,
                "default": 50
              }
            },
            "required": [
              "min",
              "max"
            ]
          },
          "meatPreference": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "肉类偏好"
          },
          "tastePreferences": {
            "type": "object",
            "description": "口味偏好",
            "properties": {
              "sweetness": {
                "type": "integer",
                "minimum": 0,
                "maximum": 5,
                "default": 2,
                "description": "甜度偏好，0-不甜，5-很甜"
              },
              "saltiness": {
                "type": "integer",
                "minimum": 0,
                "maximum": 5,
                "default": 2,
                "description": "咸度偏好，0-清淡，5-很咸"
              },
              "oiliness": {
                "type": "integer",
                "minimum": 0,
                "maximum": 5,
                "default": 2,
                "description": "油腻度偏好，0-清淡，5-重油"
              }
            }
          },
          "canteenPreferences": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "偏好食堂ID"
          },
          "portionSize": {
            "type": "string",
            "enum": [
              "small",
              "medium",
              "large"
            ],
            "default": "medium",
            "description": "份量偏好"
          },
          "favoriteIngredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "喜欢的食材",
            "maxItems": 20
          },
          "avoidIngredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "不喜欢的食材（非过敏原）",
            "maxItems": 20
          },
          "notificationSettings": {
            "type": "object",
            "description": "通知偏好设置",
            "properties": {
              "newDishAlert": {
                "type": "boolean",
                "default": true,
                "description": "新菜品提醒"
              },
              "priceChangeAlert": {
                "type": "boolean",
                "default": false,
                "description": "价格变动提醒"
              },
              "reviewReplyAlert": {
                "type": "boolean",
                "default": true,
                "description": "点评回复提醒"
              },
              "weeklyRecommendation": {
                "type": "boolean",
                "default": true,
                "description": "每周推荐"
              }
            }
          },
          "displaySettings": {
            "type": "object",
            "description": "显示偏好",
            "properties": {
              "showCalories": {
                "type": "boolean",
                "default": true,
                "description": "显示卡路里信息"
              },
              "showNutrition": {
                "type": "boolean",
                "default": false,
                "description": "显示营养成分"
              },
              "sortBy": {
                "type": "string",
                "enum": [
                  "rating",
                  "price_low",
                  "price_high",
                  "popularity",
                  "newest"
                ],
                "default": "rating",
                "description": "默认排序方式"
              }
            }
          }
        },
        "required": [
          "id",
          "userId"
        ]
      },
      "Admin": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "管理员ID"
          },
          "username": {
            "type": "string",
            "description": "管理员名"
          },
          "role": {
            "type": "string",
            "description": "角色名"
          },
          "canteenId": {
            "type": "string",
            "description": "所属食堂ID",
            "nullable": true
          },
          "createdBy": {
            "type": "string",
            "description": "创建者ID",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "description": "当前页码"
          },
          "pageSize": {
            "type": "integer",
            "description": "每页数量"
          },
          "total": {
            "type": "integer",
            "description": "总记录数"
          },
          "totalPages": {
            "type": "integer",
            "description": "总页数"
          }
        }
      },
      "Window": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "number": {
            "type": "string",
            "description": "窗口号"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tag": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "特色"
          }
        },
        "required": [
          "id",
          "name",
          "number"
        ]
      },
      "Canteen": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "openingHours": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "dayOfWeek": {
                  "type": "string",
                  "description": "星期几"
                },
                "slots": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "mealType": {
                        "type": "string",
                        "description": "早/中/晚/夜宵"
                      },
                      "openTime": {
                        "type": "string",
                        "description": "开始时间"
                      },
                      "closeTime": {
                        "type": "string",
                        "description": "结束时间"
                      }
                    },
                    "required": [
                      "mealType",
                      "openTime",
                      "closeTime"
                    ]
                  },
                  "description": "当天的开放时段列表"
                },
                "isClosed": {
                  "type": "boolean",
                  "description": "是否关闭"
                }
              },
              "required": [
                "dayOfWeek",
                "slots",
                "isClosed"
              ]
            },
            "description": "营业时间"
          },
          "averageRating": {
            "type": "number",
            "description": "平均评分",
            "format": "float"
          },
          "reviewCount": {
            "type": "integer",
            "description": "评论数"
          },
          "windowsList": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Window"
            },
            "description": "窗口列表"
          }
        },
        "required": [
          "id",
          "name",
          "images"
        ]
      },
      "Dish": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "description": "菜品名称"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "菜品标签"
          },
          "price": {
            "type": "number",
            "format": "float",
            "description": "价格"
          },
          "description": {
            "type": "string",
            "description": "菜品描述"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "图片URL列表"
          },
          "parentDishId": {
            "type": "string",
            "description": "父项菜ID"
          },
          "subDishId": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "子项菜品ID"
            },
            "description": "菜品子项列表"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "原辅料"
          },
          "allergens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "过敏原"
          },
          "spicyLevel": {
            "type": "integer"
          },
          "sweetness": {
            "type": "integer"
          },
          "saltiness": {
            "type": "integer"
          },
          "oiliness": {
            "type": "integer"
          },
          "canteenId": {
            "type": "string",
            "description": "所属食堂ID"
          },
          "canteenName": {
            "type": "string",
            "description": "所属食堂名称"
          },
          "floor": {
            "type": "string",
            "description": "楼层"
          },
          "windowNumber": {
            "type": "string",
            "description": "窗口号"
          },
          "windowName": {
            "type": "string",
            "description": "窗口名"
          },
          "availableMealTime": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "breakfast",
                "lunch",
                "dinner",
                "nightsnack"
              ]
            },
            "description": "供应时段"
          },
          "availableDates": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "startDate": {
                  "type": "string",
                  "format": "date-time"
                },
                "endDate": {
                  "type": "string",
                  "format": "date-time"
                }
              },
              "required": [
                "endDate",
                "startDate"
              ]
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "online",
              "offline"
            ],
            "description": "菜品状态"
          },
          "averageRating": {
            "type": "number",
            "format": "float",
            "description": "平均评分"
          },
          "reviewCount": {
            "type": "integer",
            "description": "评价数量"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Review": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "dishId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "userNickname": {
            "type": "string"
          },
          "userAvatar": {
            "type": "string"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "content": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "approved",
              "rejected"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Comment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "reviewId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "userNickname": {
            "type": "string"
          },
          "userAvatar": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "approved",
              "rejected"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Report": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "reporterId": {
            "type": "string"
          },
          "reporterNickname": {
            "type": "string"
          },
          "targetType": {
            "type": "string",
            "enum": [
              "review",
              "comment"
            ]
          },
          "targetId": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "approved",
              "rejected"
            ]
          },
          "handleResult": {
            "type": "string",
            "nullable": true
          },
          "handledBy": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "handledAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "News": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string",
            "description": "摘要"
          },
          "canteenId": {
            "type": "string"
          },
          "canteenName": {
            "type": "string"
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time"
          },
          "createdBy": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OperationLog": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "adminId": {
            "type": "string"
          },
          "adminUsername": {
            "type": "string"
          },
          "action": {
            "type": "string",
            "description": "操作类型"
          },
          "targetType": {
            "type": "string",
            "description": "操作对象类型"
          },
          "targetId": {
            "type": "string",
            "description": "操作对象ID"
          },
          "details": {
            "type": "object",
            "description": "操作详情",
            "properties": {}
          },
          "result": {
            "type": "string",
            "enum": [
              "success",
              "failure"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {},
            "nullable": true
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 400
          },
          "message": {
            "type": "string",
            "example": "请求参数错误"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Unauthorized": {
        "$ref": "#/components/schemas/ErrorResponse"
      },
      "InternalError": {
        "$ref": "#/components/schemas/ErrorResponse"
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "登录成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "object",
                "properties": {
                  "accessToken": {
                    "type": "string"
                  },
                  "refreshToken": {
                    "type": "string"
                  }
                },
                "description": "JWT Token"
              },
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "AdminLoginResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "登录成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "object",
                "properties": {
                  "accessToken": {
                    "type": "string"
                  },
                  "refreshToken": {
                    "type": "string"
                  }
                },
                "description": "JWT Token"
              },
              "admin": {
                "$ref": "#/components/schemas/Admin"
              },
              "permissions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "权限列表"
              }
            }
          }
        }
      },
      "DishResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/Dish"
          }
        }
      },
      "DishListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Dish"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "AdminListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Admin"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "permissions": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  ]
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "AdminResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "allOf": [
              {
                "$ref": "#/components/schemas/Admin"
              },
              {
                "type": "object",
                "properties": {
                  "permissions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            ]
          }
        }
      },
      "NewsListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/News"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "NewsResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "$ref": "#/components/schemas/News"
          }
        }
      },
      "PendingUploadListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "canteenId": {
                      "type": "string"
                    },
                    "canteenName": {
                      "type": "string"
                    },
                    "price": {
                      "type": "number",
                      "format": "float"
                    },
                    "window": {
                      "type": "string"
                    },
                    "ingredients": {
                      "type": "string"
                    },
                    "allergens": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "images": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "uploaderId": {
                      "type": "string"
                    },
                    "uploaderNickname": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "PendingCommentListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Comment"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "reviewContent": {
                          "type": "string"
                        },
                        "dishName": {
                          "type": "string"
                        }
                      }
                    }
                  ]
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "PendingReviewListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/Review"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "dishName": {
                          "type": "string"
                        },
                        "dishImage": {
                          "type": "string"
                        }
                      }
                    }
                  ]
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "CanteenResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/Canteen"
          }
        },
        "required": [
          "data"
        ]
      },
      "CanteenListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Canteen"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "WindowResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/Window"
          }
        },
        "required": [
          "data"
        ]
      },
      "WindowListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Window"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "LogListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/OperationLog"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "ImageUploadResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "上传成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "url": {
                "type": "string",
                "description": "图片URL"
              },
              "filename": {
                "type": "string",
                "description": "文件名"
              }
            }
          }
        }
      },
      "ReportListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "success"
          },
          "data": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Report"
                }
              },
              "meta": {
                "$ref": "#/components/schemas/PaginationMeta"
              }
            }
          }
        }
      },
      "DishCreateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "菜品名称"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "菜品标签"
          },
          "price": {
            "type": "number",
            "format": "float",
            "description": "价格"
          },
          "description": {
            "type": "string",
            "description": "菜品描述"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "图片URL列表"
          },
          "parentDishId": {
            "type": "string",
            "description": "父项菜ID"
          },
          "subDishId": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "子项菜品ID"
            },
            "description": "菜品子项列表"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "原辅料"
          },
          "allergens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "过敏原"
          },
          "canteenId": {
            "type": "string",
            "description": "所属食堂ID"
          },
          "canteenName": {
            "type": "string",
            "description": "所属食堂名称"
          },
          "floor": {
            "type": "string",
            "description": "楼层"
          },
          "windowNumber": {
            "type": "string",
            "description": "窗口号"
          },
          "windowName": {
            "type": "string",
            "description": "窗口名"
          },
          "availableMealTime": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "breakfast",
                "lunch",
                "dinner",
                "nightsnack"
              ]
            },
            "description": "供应时段"
          },
          "availableDates": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "startDate": {
                  "type": "string",
                  "format": "date-time"
                },
                "endDate": {
                  "type": "string",
                  "format": "date-time"
                }
              },
              "required": [
                "endDate",
                "startDate"
              ]
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "online",
              "offline"
            ],
            "description": "菜品状态"
          }
        },
        "required": [
          "name",
          "price",
          "canteenName",
          "windowName"
        ]
      },
      "CanteenCreateRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "operatingHours": {
            "type": "string",
            "description": "营业时间"
          },
          "averageRating": {
            "type": "number",
            "description": "平均评分"
          },
          "reviewCount": {
            "type": "integer",
            "description": "评论数"
          },
          "windowsList": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Window"
            },
            "description": "窗口列表"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "CanteenUpdateRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "operatingHours": {
            "type": "string",
            "description": "营业时间"
          },
          "averageRating": {
            "type": "number",
            "description": "平均评分"
          },
          "reviewCount": {
            "type": "integer",
            "description": "评论数"
          },
          "windowsList": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Window"
            },
            "description": "窗口列表"
          }
        }
      },
      "WindowCreateRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "number": {
            "type": "string",
            "description": "窗口号"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tag": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "特色"
          }
        },
        "required": [
          "id",
          "name",
          "number"
        ]
      },
      "WindowUpdateRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "number": {
            "type": "string",
            "description": "窗口号"
          },
          "position": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "tag": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "特色"
          }
        }
      },
      "DishUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "菜品名称"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "菜品标签"
          },
          "price": {
            "type": "number",
            "format": "float",
            "description": "价格"
          },
          "description": {
            "type": "string",
            "description": "菜品描述"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "图片URL列表"
          },
          "parentDishId": {
            "type": "string",
            "description": "父项菜ID"
          },
          "subDishId": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "子项菜品ID"
            },
            "description": "菜品子项列表"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "原辅料"
          },
          "allergens": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "过敏原"
          },
          "canteenId": {
            "type": "string",
            "description": "所属食堂ID"
          },
          "canteenName": {
            "type": "string",
            "description": "所属食堂名称"
          },
          "floor": {
            "type": "string",
            "description": "楼层"
          },
          "windowNumber": {
            "type": "string",
            "description": "窗口号"
          },
          "windowName": {
            "type": "string",
            "description": "窗口名"
          },
          "availableMealTime": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "breakfast",
                "lunch",
                "dinner",
                "nightsnack"
              ]
            },
            "description": "供应时段"
          },
          "availableDates": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "startDate": {
                  "type": "string",
                  "format": "date-time"
                },
                "endDate": {
                  "type": "string",
                  "format": "date-time"
                }
              },
              "required": [
                "endDate",
                "startDate"
              ]
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "online",
              "offline"
            ],
            "description": "菜品状态"
          }
        }
      },
      "ReportHandleRequest": {
        "type": "object",
        "required": [
          "action"
        ],
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "delete_content",
              "warn_user",
              "reject_report"
            ],
            "description": "处理动作"
          },
          "result": {
            "type": "string",
            "description": "处理结果说明"
          }
        }
      },
      "NewsCreateRequest": {
        "type": "object",
        "required": [
          "title",
          "content",
          "publishedAt"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "canteenId": {
            "type": "string"
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "NewsUpdateRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "publishedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AdminCreateRequest": {
        "type": "object",
        "required": [
          "username",
          "password",
          "permissions"
        ],
        "properties": {
          "username": {
            "type": "string",
            "minLength": 3,
            "maxLength": 20
          },
          "password": {
            "type": "string",
            "format": "password",
            "minLength": 8,
            "description": "密码必须包含大小写字母、数字和特殊符号"
          },
          "canteenId": {
            "type": "string",
            "nullable": true
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "权限列表"
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "servers": [],
  "security": []
}